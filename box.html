<html>
<head>
<script lang="javascript">
function getQueryVariable(variable)
{
	var query = window.location.search.substring(1);
	var vars = query.split("&");
	for (var i = 0; i < vars.length; i++)
	{
		var pair = vars[i].split("=");
		if (pair[0] == variable)
			return pair[1];
	}
	return "";
};

const GameVersion =
{
	/*Unknown           */Unk:   0,
	/*Red               */_Re: 101,
	/*Blue              */_Bl: 102,
	/*Yellow            */_Ye: 103,
	/*Gold              */_Go: 201,
	/*Silver            */_Si: 202,
	/*Crystal           */_Cr: 203,
	/*Ruby              */_Ru: 301,
	/*Sapphire          */_Sa: 302,
	/*FireRed           */_FR: 303,
	/*LeafGreen         */_LG: 304,
	/*Emerald           */_Em: 305,
	/*Diamond           */_Di: 401,
	/*Pearl             */_Pe: 402,
	/*Platinum          */_Pl: 403,
	/*HeartGold         */_HG: 404,
	/*SoulSilver        */_SS: 405,
	/*Black             */_Bk: 501,
	/*White             */_Wh: 502,
	/*Black 2           */_B2: 503,
	/*White 2           */_W2: 504,
	/*X                 */_X_: 601,
	/*Y                 */_Y_: 602,
	/*Omega Ruby        */_oR: 603,
	/*Alpha Sapphire    */_aS: 604,
	/*Sun               */_Su: 701,
	/*Moon              */_Mo: 702,
	/*Ultra Sun         */_US: 703,
	/*Ultra Moon        */_UM: 704,
	/*Let's GO, Pikachu!*/_LP: 705,
	/*Let's GO, Eevee!  */_LE: 706,
	/*Sword             */_Sw: 801,
	/*Shield            */_Sh: 802,
	/*Brilliant Diamond */_BD: 803,
	/*Shinning Pearl    */_SP: 804,
	/*Legends: Arceus   */_L1: 805,
};
					/* 0    1    2    3    4    5    6    7    8*/
const GenerationMax = [0, 151, 251, 386, 493, 649, 721, 809, 893];
_Gen1 = GameVersion._Re;
_Gen2 = GameVersion._Go;
_Gen3 = GameVersion._Ru;
_Gen4 = GameVersion._Di;
_Gen5 = GameVersion._Bk;
_Gen6 = GameVersion._X_;
_Gen7 = GameVersion._Su;
_Gen8 = GameVersion._Sw

function inArray(haystack, needle)
{
	var len = haystack.length;
	for (var i=0; i<len; i++) {
		if (haystack[i]==needle) {
			return i;
		}
	}
	//console.log("needle:" + needle + " haystack:" + haystack);
	return -1
};
</script>
<script lang="javascript" src="js/box-names.js"></script>
<script lang="javascript" src="poke_icon/g01/box-g01-re-bl.js"></script>

<script lang="javascript" src="poke_icon/g02/box-g02-go-si.js"></script>
<script lang="javascript" src="poke_icon/g02/box-g02-natdex.js"></script>
<script lang="javascript" src="poke_icon/g02/box-g02-evodex.js"></script>

<script lang="javascript" src="poke_icon/g08/box-g08-sw-sh.js"></script>
<script lang="javascript" src="poke_icon/g08/box-g08-natdex.js"></script>
<script lang="javascript" src="poke_icon/g08/box-g08-evodex.js"></script>
</head>
<body>
<script lang="javascript">
boxCntr = 1;
boxIdx = 1;
boxHead = "";
boxBody = "";
gameName = getQueryVariable("game");
//                    short name          full name
if      (gameName == "Re"     || gameName == "Red")               game = GameVersion._Re;
else if (gameName == "Bl"     || gameName == "Blue")              game = GameVersion._Bl;
else if (gameName == "Ye"     || gameName == "Yellow")            game = GameVersion._Ye;
else if (gameName == "Go"     || gameName == "Gold")              game = GameVersion._Go;
else if (gameName == "Si"     || gameName == "Silver")            game = GameVersion._Si;
else if (gameName == "Cr"     || gameName == "Crystal")           game = GameVersion._Cr;
else if (gameName == "Ru"     || gameName == "Ruby")              game = GameVersion._Ru;
else if (gameName == "Sa"     || gameName == "Sapphire")          game = GameVersion._Sa;
else if (gameName == "Em"     || gameName == "Emerald")           game = GameVersion._Em;
else if (gameName == "FR"     || gameName == "FireRed")           game = GameVersion._FR;
else if (gameName == "LG"     || gameName == "LeafGreen")         game = GameVersion._LG;
else if (gameName == "Di"     || gameName == "Diamond")           game = GameVersion._Di;
else if (gameName == "Pe"     || gameName == "Pearl")             game = GameVersion._Pe;
else if (gameName == "Pl"     || gameName == "Platinum")          game = GameVersion._Pl;
else if (gameName == "HG"     || gameName == "HeartGold")         game = GameVersion._HG;
else if (gameName == "SS"     || gameName == "SoulSilver")        game = GameVersion._SS;
else if (gameName == "Bk"     || gameName == "Black")             game = GameVersion._Bk;
else if (gameName == "Wh"     || gameName == "White")             game = GameVersion._Wh;
else if (gameName == "B2"     || gameName == "Black2")            game = GameVersion._B2;
else if (gameName == "W2"     || gameName == "White2")            game = GameVersion._W2;
else if (gameName == "X"      || gameName == "X")                 game = GameVersion._X_;
else if (gameName == "Y"      || gameName == "Y")                 game = GameVersion._Y_;
else if (gameName == "oR"     || gameName == "OmegaRuby")         game = GameVersion._oR;
else if (gameName == "aS"     || gameName == "AlphaSapphire")     game = GameVersion._aS;
else if (gameName == "Su"     || gameName == "Sun")               game = GameVersion._Su;
else if (gameName == "Mo"     || gameName == "Moon")              game = GameVersion._Mo;
else if (gameName == "US"     || gameName == "UltraSun")          game = GameVersion._US;
else if (gameName == "UM"     || gameName == "UltraMoon")         game = GameVersion._UM;
else if (gameName == "LP"     || gameName == "Let's GO, Pikachu") game = GameVersion._LP;
else if (gameName == "LE"     || gameName == "Let's GO, Eevee")   game = GameVersion._LE;
else if (gameName == "Sw"     || gameName == "Sword")             game = GameVersion._Sw;
else if (gameName == "Sh"     || gameName == "Shield")            game = GameVersion._Sh;
else if (gameName == "BD"     || gameName == "Briliant Diamond")  game = GameVersion._BD;
else if (gameName == "SP"     || gameName == "Shining Pearl")     game = GameVersion._SP;
else if (gameName == "Arceus" || gameName == "Legends: Arceus")   game = GameVersion._L1;
else
{
	document.writeln("Unknown game: ", gameName);
	die();
}

version = getQueryVariable("ver");

maxBox = 30;
divBox = 6;

_Rdex = {};
_Ndex = {};
_Edex = {};
iconPath = "";
imgWd = "64";
if (game == GameVersion._Re || game == GameVersion._Bl)
{
	_Rdex = _Regdex_ReBl;
	_Ndex = _Regdex_ReBl;
	_Edex = _Regdex_ReBl;
	iconPath = _IcoPath_ReBl;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == GameVersion._Ye)
{
	_Rdex = _Regdex_Ye;
	_Ndex = _Regdex_Ye;
	_Edex = _Regdex_Ye;
	iconPath = _IcoPath_Ye;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == GameVersion._Go || game == GameVersion._Si)
{
	_Rdex = _Regdex_GoSi;
	_Ndex = _Natdex_G02;
	_Edex = _Evodex_G02;
	iconPath = _IcoPath_GoSi;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == GameVersion._Cr)
{
	_Rdex = _Regdex_Cr;
	_Ndex = _Natdex_G02;
	_Edex = _Evodex_G02;
	iconPath = _IcoPath_Cr;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == GameVersion._Sw || game == GameVersion._Sh)
{
	_Rdex = _Regdex_SwSh;
	_Ndex = _Natdex_G08;
	_Edex = _Evodex_G08;
	imgWd = "68";
	iconPath = _IcoPath_Home;
	if (version == "r")	// Evolution Dex
	{
		iconPath = _IcoPath_SwSh;
	}
}
if (version == "e")	// Evolution Dex
{
	_Ndex = _Edex;
}
else if (version == "r")
{
	_Ndex = _Rdex;
}

_MaxDex = _Ndex.length;

boxCntr = 1;
boxIdx = 1;
boxHead = "";
boxBody = "";
boxFoot = "";
key = 0;
idxStr = "0000";
for (const rdex in _Ndex)
{
	if (rdex.substring(0, 4) != idxStr)
	{
		++key;
		idxStr = rdex.substring(0, 4);
	}
	if (boxCntr == 1)
	{
		boxHead = "<table style='border:1px solid gray; font-family:consolas; text-align:center;' cellspacing=0><tr><th colspan=" + divBox + " style='border:1px solid gray;'>" + gameName + " " + ("0" + boxIdx.toString(10)).substr(-2);
		if (version == "e")
		{
			boxHead += " E";
		}
		else if (version == "r")
		{
			boxHead += " R";
		}
		else
		{
			boxHead += " N";
		}
		if (game < GameVersion._Ru) // Gen 1 & 2
		{
			boxHead += ("000" + key.toString(10)).substr(-3);
		}
		else
		{
			boxHead += ("0000" + key.toString(10)).substr(-4);
		}
		++boxIdx;
	}
	
	console.log(typeof(rdex) + " " + rdex + ": " + _Names[rdex]);
	if (version == "e")
	{
		boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'><span title='" + rdex.substr(0, 4) + " " + _Names[rdex] + "'><img src='" + iconPath + _Ndex[rdex] + ".png' alt='" + _Ndex[rdex] + "' width='" + imgWd + "'></span><br/><span style='font-size:10px;'>#" + rdex.substr(0, 4) + "<br/>" + _Names[rdex] + "</span></td>";
	}
	else
	{
		boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'><span title='" + ("0000" + key.toString(10)).substr(-4) + " " + _Names[rdex] + "'><img src='" + iconPath + _Ndex[rdex] + ".png' alt='" + _Ndex[rdex] + "' width='" + imgWd + "'></span><br/><span style='font-size:10px;'>#" + ("0000" + key.toString(10)).substr(-4) + "<br/>" + _Names[rdex] + "</span></td>";
	}

	if (boxCntr == maxBox)
	{
		boxHead += "-";
		if (game < GameVersion._Ru) // Gen 1 & 2
		{
			boxHead += ("000" + key.toString(10)).substr(-3);
		}
		else
		{
			boxHead += ("0000" + key.toString(10)).substr(-4);
		}
		boxHead += "</th></tr><tr>";

		document.write(boxHead);
		document.write(boxBody);
		document.write("</tr></table><br/>");
		boxCntr = 0;
		boxHead = "";
		boxBody = "";
	}

	if (boxCntr % divBox == 0)
		boxBody += "</tr><tr>";

	boxCntr++;
}
// filler
while (boxCntr <= maxBox)
{
	boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'><img src='" + iconPath;
	if (game < _Ru) // Gen 1 & 2
	{
		boxBody += "00";
	}
	else
	{
		boxBody += "0000";
	}
	boxBody += "-none.png' width='" + imgWd + "px'><br/><span style='font-size:10px;'>&nbsp;</span></td>";
	if (boxCntr % divBox == 0)
		boxBody += "</tr><tr>";
	boxCntr++;
}
boxHead += "-";
if (game < _Ru) // Gen 1 & 2
{
	boxHead += ("000" + key.toString(10)).substr(-3);
}
else
{
	boxHead += ("0000" + key.toString(10)).substr(-4);
}
boxHead += "</th></tr><tr>";

document.write(boxHead);
document.write(boxBody);
document.write("</tr></table><br/>");
</script>

</body>
</html>