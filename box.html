<html>
<head>
<script lang="javascript">
const GameVersion =
{
	/*Unknown           */Unk:    0,
	/*Red               */_Re:    1,
	/*Blue              */_Bl:    2,
	/*Yellow            */_Ye:    3,
	/*Gold              */_Go:    4,
	/*Silver            */_Si:    5,
	/*Crystal           */_Cr:    6,
	/*Ruby              */_Ru:    7,
	/*Sapphire          */_Sa:    8,
	/*FireRed           */_FR:    9,
	/*LeafGreen         */_LG:   10,
	/*Emerald           */_Em:   11,
	/*Diamond           */_Di:   12,
	/*Pearl             */_Pe:   13,
	/*Platinum          */_Pl:   14,
	/*HeartGold         */_HG:   15,
	/*SoulSilver        */_SS:   16,
	/*Black             */_Bk:   17,
	/*White             */_Wh:   18,
	/*Black 2           */_B2:   19,
	/*White 2           */_W2:   20,
	/*X                 */_X_:   21,
	/*Y                 */_Y_:   22,
	/*Omega Ruby        */_oR:   23,
	/*Alpha Sapphire    */_aS:   24,
	/*Sun               */_Su:   25,
	/*Moon              */_Mo:   26,
	/*Ultra Sun         */_US:   27,
	/*Ultra Moon        */_UM:   28,
	/*Let's GO, Pikachu!*/_LP:   29,
	/*Let's GO, Eevee!  */_LE:   30,
	/*Sword             */_Sw:   31,
	/*Shield            */_Sh:   32,
	/*Brilliant Diamond */_BD:   33,
	/*Shinning Pearl    */_SP:   34,
	/*Legends: Arceus   */_L1:   35,
	//== STORAGE
	/*Bank              */_Ba: 1001,
	/*Home              */_Ho: 1002,
};
					/* 0    1    2    3    4    5    6    7    8*/
const GenerationMax = [0, 151, 251, 386, 493, 649, 721, 809, 893];
_Gen1 = GameVersion._Re;
_Gen2 = GameVersion._Go;
_Gen3 = GameVersion._Ru;
_Gen4 = GameVersion._Di;
_Gen5 = GameVersion._Bk;
_Gen6 = GameVersion._X_;
_Gen7 = GameVersion._Su;
_Gen8 = GameVersion._Sw

</script>
<script lang="javascript" src="js/fxn.js"></script>
<script lang="javascript" src="js/pkmn-names.js"></script>
<script lang="javascript" src="poke_icon/g01/box-g01.js"></script>
<script lang="javascript" src="poke_icon/g02/box-g02.js"></script>
<script lang="javascript" src="poke_icon/g08/box-g08.js"></script>
<script lang="javascript" src="js/game.js"></script>
</head>
<body>
<script lang="javascript">
boxCntr = 1;
boxIdx = 1;
boxHead = "";
boxBody = "";
gameName = getQueryVariable("game");
_Dex = Dex[gameName];
if (_Dex == undefined)
{
	document.writeln("Unknown game: ", gameName);
	die();
}

version = getQueryVariable("ver");

console.log(_Dex);

game = _Dex.id;
_Rdex = _Dex.rList;
_Ndex = _Dex.nList;
_Edex = _Dex.eList;
iconPath = _Dex.iconPath;
imgWd = _Dex.imgWd;
maxBox = _Dex.maxBox;
divBox = _Dex.divBox;

_GameVersions.forEach(gv =>
 {
	if (gv.id === -1)
		continue;
	
	document.write("[ <a href='box.html?game={gameName}&ver={version}'>{gv.name}</a> ]");
});

// if (game == GameVersion._Sw || game == GameVersion._Sh)
// {
// 	_Rdex = _Regdex_SwSh;
// 	_Ndex = _Natdex_G08;
// 	_Edex = _Evodex_G08;
// 	iconPath = _IcoPath_Home;
// 	if (version == "r")	// Evolution Dex
// 	{
// 		iconPath = _IcoPath_SwSh;
// 	}
// }

if (version == "e")	// Evolution Dex
{
	_Ndex = _Edex;
}
else if (version == "r") // Regional Dex
{
	_Ndex = _Rdex;
}

_MaxDex = _Ndex.length;

boxCntr = 1;
boxIdx = 1;
boxHead = "";
boxBody = "";
boxFoot = "";
key = 0;
idxStr = "0000";
for (const rdex in _Ndex)
{
	if (rdex.substring(0, 4) != idxStr)
	{
		++key;
		idxStr = rdex.substring(0, 4);
	}
	if (boxCntr == 1)
	{
		boxHead = "<table style='border:1px solid gray; font-family:consolas; text-align:center;' cellspacing=0>";
		boxHead += "<tr><th colspan=" + divBox + " style='border:1px solid gray;'>" + gameName + " " + ("0" + boxIdx.toString(10)).substr(-2);
		if (version == "e")
		{
			boxHead += " E";
		}
		else if (version == "r")
		{
			boxHead += " R";
		}
		else
		{
			boxHead += " N";
		}
		if (game < GameVersion._Ru) // Gen 1 & 2
		{
			boxHead += ("000" + key.toString(10)).substr(-3);
		}
		else
		{
			boxHead += ("0000" + key.toString(10)).substr(-4);
		}
		++boxIdx;
	}
	
	console.log(typeof(rdex) + " " + rdex + ": " + _Names[rdex]);
	if (version == "e")
	{
		boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'>";
		boxBody += "<span title='" + rdex.substr(0, 4) + " " + _Names[rdex] + "'>";
		boxBody += "<img id='" + idxStr + "'' src='" + iconPath + _Ndex[rdex] + ".png' alt='" + _Ndex[rdex] + "' width='" + imgWd + "' onclick='imgPokemon_Clicked(this)'/>";
		boxBody += "</span><br/>";
		boxBody += "<span style='font-size:10px;'>#" + rdex.substr(0, 4) + "<br/>";
		boxBody += _Names[rdex] + "</span></td>";
	}
	else
	{
		boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'>";
		boxBody += "<span title='" + ("0000" + key.toString(10)).substr(-4) + " " + _Names[rdex] + "'><img id='" + idxStr + "'' src='" + iconPath + _Ndex[rdex] + ".png' alt='" + _Ndex[rdex] + "' width='" + imgWd + "' onclick='imgPokemon_Clicked(this)'></span><br/><span style='font-size:10px;'>#" + ("0000" + key.toString(10)).substr(-4) + "<br/>" + _Names[rdex] + "</span></td>";
	}

	if (boxCntr == maxBox)
	{
		boxHead += "-";
		if (game < GameVersion._Ru) // Gen 1 & 2
		{
			boxHead += ("000" + key.toString(10)).substr(-3);
		}
		else
		{
			boxHead += ("0000" + key.toString(10)).substr(-4);
		}
		boxHead += "</th></tr><tr>";

		document.write(boxHead);
		document.write(boxBody);
		document.write("</tr></table><br/>");
		boxCntr = 0;
		boxHead = "";
		boxBody = "";
	}

	if (boxCntr % divBox == 0)
		boxBody += "</tr><tr>";

	boxCntr++;
}
// filler
while (boxCntr <= maxBox)
{
	boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'><img src='" + iconPath;
	if (game < GameVersion._Ru) // Gen 1 & 2
	{
		boxBody += "00";
	}
	else
	{
		boxBody += "0000";
	}
	boxBody += "-none.png' width='" + imgWd + "px'><br/><span style='font-size:10px;'>&nbsp;</span></td>";
	if (boxCntr % divBox == 0)
		boxBody += "</tr><tr>";
	boxCntr++;
}
boxHead += "-";
if (game < GameVersion._Ru) // Gen 1 & 2
{
	boxHead += ("000" + key.toString(10)).substr(-3);
}
else
{
	boxHead += ("0000" + key.toString(10)).substr(-4);
}
boxHead += "</th></tr><tr>";

document.write(boxHead);
document.write(boxBody);
document.write("</tr></table><br/>");
</script>

</body>
</html>