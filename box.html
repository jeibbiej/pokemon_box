<html>
<head>
<script lang="javascript">
function getQueryVariable(variable)
{
	var query = window.location.search.substring(1);
	var vars = query.split("&");
	for (var i = 0; i < vars.length; i++)
	{
		var pair = vars[i].split("=");
		if (pair[0] == variable)
			return pair[1];
	}
	return "";
};

const GameVersion =
{
	/*Unknown*/Unk,
	/*Red    */_Re, /*Blue    */_Bl, /*Yellow           */_Ye,
	/*Gold   */_Go, /*Silver  */_Si, /*Crystal          */_Cr,
	/*Ruby   */_Ru, /*Sapphire*/_Sa, /*FireRed          */_FR, /*LeafGreen     */_LG, /*Emerald           */_Em,
	/*Diamond*/_Di, /*Pearl   */_Pe, /*Platinum         */_Pl, /*HeartGold     */_HG, /*SoulSilver        */_SS,
	/*Black  */_Bk, /*White   */_Wh, /*Black 2          */_B2, /*White 2       */_W2,
	/*X      */_X_, /*Y       */_Y_, /*Omega Ruby       */_oR, /*Alpha Sapphire*/_aS,
	/*Sun    */_Su, /*Moon    */_Mo, /*Ultra Sun        */_US, /*Ultra Moon    */_UM, /*Let's GO, Pikachu!*/_LP, /*Let's GO, Eevee!*/_LE,
	/*Sword  */_Sw, /*Shield  */_Sh, /*Brilliant Diamond*/_BD, /*Shinning Pearl*/_SP, /*Legends: Arceus   */_L493,
};
					/* 0    1    2    3    4    5    6    7    8*/
const GenerationMax = [0, 151, 251, 386, 493, 649, 721, 809, 893];
_Gen1 = _Re;
_Gen2 = _Go;
_Gen3 = _Ru;
_Gen4 = _Di;
_Gen5 = _Bk;
_Gen6 = _X_;
_Gen7 = _Su;
_Gen8 = _Sw

function inArray(haystack, needle)
{
	var len = haystack.length;
	for (var i=0; i<len; i++) {
		if (haystack[i]==needle) {
			return i;
		}
	}
	//console.log("needle:" + needle + " haystack:" + haystack);
	return -1
};
</script>
<script lang="javascript" src="js/box-names.js"></script>
<script lang="javascript" src="poke_icon/g01/box-g01-re-bl.js"></script>

<script lang="javascript" src="poke_icon/g02/box-g02-go-si.js"></script>
<script lang="javascript" src="poke_icon/g02/box-g02-natdex.js"></script>
<script lang="javascript" src="poke_icon/g02/box-g02-evodex.js"></script>

<script lang="javascript" src="poke_icon/g08/box-g08-sw-sh.js"></script>
<script lang="javascript" src="poke_icon/g08/box-g08-natdex.js"></script>
<script lang="javascript" src="poke_icon/g08/box-g08-evodex.js"></script>
</head>
<body>
<script lang="javascript">
boxCntr = 1;
boxIdx = 1;
boxHead = "";
boxBody = "";
gameName = getQueryVariable("game");
//                    short name          full name
if      (gameName == "Re"     || gameName == "Red")               game = _Re;
else if (gameName == "Bl"     || gameName == "Blue")              game = _Bl;
else if (gameName == "Ye"     || gameName == "Yellow")            game = _Ye;
else if (gameName == "Go"     || gameName == "Gold")              game = _Go;
else if (gameName == "Si"     || gameName == "Silver")            game = _Si;
else if (gameName == "Cr"     || gameName == "Crystal")           game = _Cr;
else if (gameName == "Ru"     || gameName == "Ruby")              game = _Ru;
else if (gameName == "Sa"     || gameName == "Sapphire")          game = _Sa;
else if (gameName == "Em"     || gameName == "Emerald")           game = _Em;
else if (gameName == "FR"     || gameName == "FireRed")           game = _FR;
else if (gameName == "LG"     || gameName == "LeafGreen")         game = _LG;
else if (gameName == "Di"     || gameName == "Diamond")           game = _Di;
else if (gameName == "Pe"     || gameName == "Pearl")             game = _Pe;
else if (gameName == "Pl"     || gameName == "Platinum")          game = _Pl;
else if (gameName == "HG"     || gameName == "HeartGold")         game = _HG;
else if (gameName == "SS"     || gameName == "SoulSilver")        game = _SS;
else if (gameName == "Bk"     || gameName == "Black")             game = _Bk;
else if (gameName == "Wh"     || gameName == "White")             game = _Wh;
else if (gameName == "B2"     || gameName == "Black2")            game = _B2;
else if (gameName == "W2"     || gameName == "White2")            game = _W2;
else if (gameName == "X"      || gameName == "X")                 game = _X_;
else if (gameName == "Y"      || gameName == "Y")                 game = _Y_;
else if (gameName == "oR"     || gameName == "OmegaRuby")         game = _oR;
else if (gameName == "aS"     || gameName == "AlphaSapphire")     game = _aS;
else if (gameName == "Su"     || gameName == "Sun")               game = _Su;
else if (gameName == "Mo"     || gameName == "Moon")              game = _Mo;
else if (gameName == "US"     || gameName == "UltraSun")          game = _US;
else if (gameName == "UM"     || gameName == "UltraMoon")         game = _UM;
else if (gameName == "LP"     || gameName == "Let's GO, Pikachu") game = _LP;
else if (gameName == "LE"     || gameName == "Let's GO, Eevee")   game = _LE;
else if (gameName == "Sw"     || gameName == "Sword")             game = _Sw;
else if (gameName == "Sh"     || gameName == "Shield")            game = _Sh;
else if (gameName == "BD"     || gameName == "Briliant Diamond")  game = _BD;
else if (gameName == "SP"     || gameName == "Shining Pearl")     game = _SP;
else if (gameName == "Arceus" || gameName == "Legends: Arceus")   game = _L493;
else
{
	document.writeln("Unknown game: ", gameName);
	die();
}

version = getQueryVariable("ver");

maxBox = 30;
divBox = 6;

_Rdex = {};
_Ndex = {};
_Edex = {};
iconPath = "";
imgWd = "64";
if (game == _Re || game == _Bl)
{
	_Rdex = _Regdex_ReBl;
	_Ndex = _Regdex_ReBl;
	_Edex = _Regdex_ReBl;
	iconPath = _IcoPath_ReBl;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == _Ye)
{
	_Rdex = _Regdex_Ye;
	_Ndex = _Regdex_Ye;
	_Edex = _Regdex_Ye;
	iconPath = _IcoPath_Ye;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == _Go || game == _Si)
{
	_Rdex = _Regdex_GoSi;
	_Ndex = _Natdex_G02;
	_Edex = _Evodex_G02;
	iconPath = _IcoPath_GoSi;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == _Cr)
{
	_Rdex = _Regdex_Cr;
	_Ndex = _Natdex_G02;
	_Edex = _Evodex_G02;
	iconPath = _IcoPath_Cr;
	imgWd = "16";
	maxBox = 20;
	divBox = 5;
}
else if (game == _Sw || game == _Sh)
{
	_Rdex = _Regdex_SwSh;
	_Ndex = _Natdex_G08;
	_Edex = _Evodex_G08;
	imgWd = "68";
	iconPath = _IcoPath_Home;
	if (version == "r")	// Evolution Dex
	{
		iconPath = _IcoPath_SwSh;
	}
}
if (version == "e")	// Evolution Dex
{
	_Ndex = _Edex;
}
else if (version == "r")
{
	_Ndex = _Rdex;
}

_MaxDex = _Ndex.length;

boxCntr = 1;
boxIdx = 1;
boxHead = "";
boxBody = "";
boxFoot = "";
key = 0;
idxStr = "0000";
for (const rdex in _Ndex)
{
	if (rdex.substring(0, 4) != idxStr)
	{
		++key;
		idxStr = rdex.substring(0, 4);
	}
	if (boxCntr == 1)
	{
		boxHead = "<table style='border:1px solid gray; font-family:consolas; text-align:center;' cellspacing=0><tr><th colspan=" + divBox + " style='border:1px solid gray;'>" + gameName + " " + ("0" + boxIdx.toString(10)).substr(-2);
		if (version == "e")
		{
			boxHead += " E";
		}
		else if (version == "r")
		{
			boxHead += " R";
		}
		else
		{
			boxHead += " N";
		}
		if (game < _Ru) // Gen 1 & 2
		{
			boxHead += ("000" + key.toString(10)).substr(-3);
		}
		else
		{
			boxHead += ("0000" + key.toString(10)).substr(-4);
		}
		++boxIdx;
	}
	
	console.log(typeof(rdex) + " " + rdex + ": " + _Names[rdex]);
	if (version == "e")
	{
		boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'><span title='" + rdex.substr(0, 4) + " " + _Names[rdex] + "'><img src='" + iconPath + _Ndex[rdex] + ".png' alt='" + _Ndex[rdex] + "' width='" + imgWd + "'></span><br/><span style='font-size:10px;'>#" + rdex.substr(0, 4) + "<br/>" + _Names[rdex] + "</span></td>";
	}
	else
	{
		boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'><span title='" + ("0000" + key.toString(10)).substr(-4) + " " + _Names[rdex] + "'><img src='" + iconPath + _Ndex[rdex] + ".png' alt='" + _Ndex[rdex] + "' width='" + imgWd + "'></span><br/><span style='font-size:10px;'>#" + ("0000" + key.toString(10)).substr(-4) + "<br/>" + _Names[rdex] + "</span></td>";
	}

	if (boxCntr == maxBox)
	{
		boxHead += "-";
		if (game < _Ru) // Gen 1 & 2
		{
			boxHead += ("000" + key.toString(10)).substr(-3);
		}
		else
		{
			boxHead += ("0000" + key.toString(10)).substr(-4);
		}
		boxHead += "</th></tr><tr>";

		document.write(boxHead);
		document.write(boxBody);
		document.write("</tr></table><br/>");
		boxCntr = 0;
		boxHead = "";
		boxBody = "";
	}

	if (boxCntr % divBox == 0)
		boxBody += "</tr><tr>";

	boxCntr++;
}
// filler
while (boxCntr <= maxBox)
{
	boxBody += "<td style='border:1px solid gray; width:50px; vertical-align:top;'><img src='" + iconPath;
	if (game < _Ru) // Gen 1 & 2
	{
		boxBody += "00";
	}
	else
	{
		boxBody += "0000";
	}
	boxBody += "-none.png' width='" + imgWd + "px'><br/><span style='font-size:10px;'>&nbsp;</span></td>";
	if (boxCntr % divBox == 0)
		boxBody += "</tr><tr>";
	boxCntr++;
}
boxHead += "-";
if (game < _Ru) // Gen 1 & 2
{
	boxHead += ("000" + key.toString(10)).substr(-3);
}
else
{
	boxHead += ("0000" + key.toString(10)).substr(-4);
}
boxHead += "</th></tr><tr>";

document.write(boxHead);
document.write(boxBody);
document.write("</tr></table><br/>");
</script>

</body>
</html>